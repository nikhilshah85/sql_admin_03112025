create table [dbo].[flighttableInMemory]
(
	flightno int primary key NONCLUSTERED HASH WITH (BUCKET_COUNT = 1000),
	airlines varchar(20),
	source varchar(20),
	destination varchar(20),
	cost int
)WITH (MEMORY_OPTIMIZED = ON,
	          DURABILITY = SCHEMA_ONLY)




segegrate my data in 1000 - per page
DURABILITY = SCHEMA_ONLY | SCHEMA_WITH_DATA (this is what remains in memory if you restart the server)


--------------------------------------------------------------------------------------------------------

create procedure newflight2
with Native_compilation,
	SCHEMABINDING,
	Execute as Owner

as
 BEGIN ATOMIC WITH ( TRANSACTION ISOLATION LEVEL = SNAPSHOT,LANGUAGE = N'us_english')
declare @fno int = 0
declare @airlines varchar(20)
declare @source varchar(20)
declare @destination varchar(20)
declare @cost int
declare @randmcost int
while @fno < 900000
begin
	select @fno = @fno + 1
	if @fno % 2 = 0
	begin
		
		set @randmcost = (select  RAND() * 50000)
			if @randmcost < 20000
				begin
					set @cost = @randmcost
					set @source = 'Mumbai'
					set @destination = 'Nagpur'
					set @airlines = 'Air India'
				end
			else
				begin
					set @cost =(select  RAND() * 40000)
					set @source = 'Pune'
					set @destination = 'Mumbai'
					set @airlines = 'Indigo'
				end
					insert into [dbo].[flighttableInMemory] values(@fno,@airlines,@source,@destination,@cost)	
			end 
	else
	begin
		if @randmcost < 20000
				begin
					set @cost = @randmcost
					set @source = 'Kochin'
					set @destination = 'Pune'
					set @airlines = 'Spice Jet'
				end
			else
				begin
					set @cost =(select  RAND() * 40000)
					set @source = 'Banglore'
					set @destination = 'Chennai'
					set @airlines = 'Jet Airways'
				end
					insert into [dbo].[flighttableInMemory] values(@fno,@airlines,@source,@destination,@cost)	
			end 
	end

end